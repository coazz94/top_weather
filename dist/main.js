(()=>{"use strict";const e="b4e1871079ad0d513a2ab9e3069eb9d0";function t(e,t,n){this.lon=e,this.lat=t,this.name=n}const n=document.querySelector(".weather-card"),a=document.getElementById("first-row");async function c(){try{const c=function(){let e=document.getElementById("city");return e?(e=function(e){const t=e.toString();return t.replace(" ",""),t}(e.value),e):""}();if(""===c)return;const o=await async function(n){const a=(t=>`http://api.openweathermap.org/geo/1.0/direct?q=${t}&limit=1&appid=${e}`)(n),c=await fetch(a),o=await c.json();return new t(o[0].lon,o[0].lat,o[0].name)}(c),s=await async function(t,n,a){let c="";"day"===a?c=`https://api.openweathermap.org/data/2.5/weather?units=metric&lat=${t}&lon=${n}&appid=${e}`:"four"===a&&(c=`https://api.openweathermap.org/data/2.5/forecast?units=metric&lat=${t}&lon=${n}&appid=${e}`);const o=await fetch(c);return await o.json()}(o.lat,o.lon,"day");n.innerHTML="",document.getElementById("city").value="",function(e){const t=function(e){const t=document.createElement("div");t.className="weather-info-now";const n=document.createElement("div");n.textContent=`${String(Math.round(e.main.temp))}Â°`,n.className="temp";const a=document.createElement("div");a.textContent=`H: ${String(Math.round(e.main.temp_max))}Â°`;const c=document.createElement("div");c.textContent=`L: ${String(Math.round(e.main.temp_min))}Â°`;const o=document.createElement("div");o.className="weather";const s=document.createElement("div");s.textContent=e.weather[0].main,s.className="weather-status";const i=document.createElement("img");i.className="icon",i.src=`https://openweathermap.org/img/wn/${e.weather[0].icon}.png`,o.append(s,i);const r=document.createElement("div");return r.append(a,c),r.className="high-low",t.append(o,n,r),t}(e);n.append(function(e){const t=document.createElement("div");return t.className="card-header",t.innerHTML=e,t}(e.name),t),n.classList.add("visible"),function(e){const t=function(e){return{sunrise:new Date(1e3*(e.sys.sunrise+e.timezone)),sunset:new Date(1e3*(e.sys.sunset+e.timezone)),humidity:e.main.humidity,pressure:e.main.pressure,visability:e.visibility,wind:e.wind.speed}}(e);for(const[e,n]of Object.entries(t)){const t=document.createElement("div");t.className="col";const c=document.createElement("div");c.className="weather-key",c.textContent=e;const o=document.createElement("div");o.className="weather-value",o.textContent=n,t.append(c,o),a.append(t)}}(e)}(s)}catch(e){console.log("Erroe",e)}}document.getElementById("second-row"),document.querySelector("[data-search-button]").addEventListener("click",(()=>{c()})),document.addEventListener("keypress",(e=>{"Enter"===e.key&&c()}))})();